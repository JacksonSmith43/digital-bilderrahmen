<div class="container images-container">
  @if(getCurrentUser() !== undefined || authService.isLoginSuccessful){

  <p>Filter</p>

  <div aria-live="polite" aria-atomic="true" class="sr-only"></div>

  <div class="images">
    <div class="col-auto text-center">
      @if(isImageLoaded()){ 
        @if((galleryImagesLength() )> 0){ 
          @for(i of galleryImages(); track i.id; let index = $index; let last = $last){
          <img 
          [src]="i.filePath"
            [alt]="i.fileName"
            (click)="onHighlightImageSelection(i.filePath)"
            (keydown.enter)="onHighlightImageSelection(i.filePath); $event.preventDefault()"
            (keydown.space)="onHighlightImageSelection(i.filePath); $event.preventDefault()"
            [ngClass]="isImageSelected(i.filePath) ? 'image-selected' : 'image-unselected'"
            [attr.aria-pressed]="isImageSelected(i.filePath)"
            tabindex="0"
            role="button"
          />
          @if(last){
            <p class="image-number" tabindex="0">Number of images: {{ galleryImagesLength() }}</p>
            <button class="btn btn-danger" (click)="onRemoveImage(i)" [disabled]="isRemoving()" >Delete</button>
            <button class="btn btn-primary" (click)="onSelectForDevice(i)">Select for Device</button>
            <button class="btn btn-primary" (click)="onFetchAllImages()">Fetch all images</button>
          } 
        } }@else {
      <p tabindex="0" role="status">No images to display</p>
      <button class="btn btn-primary" (click)="onFetchAllImages()">Fetch all images</button>
      } }@else {
      <img src="../../assets/loading-circle-icon.gif" alt="Images are loading ...." role="img" aria-live="polite" />
      }
    </div>
  </div>
  }@else {
  <p class="not-logged-in">You are not logged in. Please login to be able to do anything_Gallery_View.</p>
  }
</div>
