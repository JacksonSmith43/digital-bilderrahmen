<div class="container images-container">
  @if(getCurrentUser() !== undefined){

  <p>Filter</p>

  <div aria-live="polite" aria-atomic="true" class="sr-only"></div>

  <div class="images">
    <div class="col-auto text-center">
      @if(isImageLoaded()){ @if(galleryImageLength() > 0){ @for(i of
      galleryImages(); track i.src; let index = $index; let last = $last){
      <img
        [src]="i.src"
        [alt]="i.alt ? i.alt : i.relativePath"
        (click)="onHighlightImageSelection(i.src)"
        (keydown.enter)="
          onHighlightImageSelection(i.src); $event.preventDefault()
        "
        (keydown.space)="
          onHighlightImageSelection(i.src); $event.preventDefault()
        "
        [ngClass]="
          galleryHighlightSrcs().includes(i.src)
            ? 'image-selected'
            : 'image-unselected'
        "
        [attr.aria-pressed]="galleryHighlightSrcs().includes(i.src)"
        tabindex="0"
        role="button"
      />

      @if(last){
      <p class="image-number" tabindex="0">
        Number of images: {{ galleryImageLength() }}
      </p>
      <button class="btn btn-danger" (click)="onRemoveImage()">
        Delete
      </button>
      <button class="btn btn-primary" (click)="onSelectForDevice(i)">
        Select for Device
      </button>
      <button class="btn btn-primary" (click)="onUploadAllImages()">
        Upload all images
      </button>
      <button class="btn btn-primary" (click)="onFetchAllImages()">
        Fetch all images
      </button>
      } } }@else {
      <p tabindex="0" role="status">No images to display</p>
      <button class="btn btn-primary" (click)="onFetchAllImages()">
        Fetch all images
      </button>
      } }@else {
      <img
        src="../../assets/loading-circle-icon.gif"
        alt="Images are loading ...."
        role="img"
        aria-live="polite"
      />
      }
    </div>
  </div>
  }@else {
  <p class="not-logged-in">
    You are not logged in. Please login to be able to do anything_Gallery_View.
  </p>
  }
</div>
